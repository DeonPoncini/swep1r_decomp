; FUN_004a0990
PUSH ESI
MOV ESI,dword ptr [ESP + 0x8]
PUSH EDI
MOV EAX,dword ptr [ESI + 0xc]
TEST AL,0x83
JZ 0x004a0a16
MOV EDI,dword ptr [ESP + 0x14]
TEST EDI,EDI
JZ 0x004a09af
CMP EDI,0x1
JZ 0x004a09af
CMP EDI,0x2
JNZ 0x004a0a16
AND AL,0xef
CMP EDI,0x1
MOV dword ptr [ESI + 0xc],EAX
JNZ 0x004a09ce
PUSH ESI
CALL 0x0049fc00
MOV ECX,dword ptr [ESP + 0x14]
ADD ESP,0x4
ADD ECX,EAX
XOR EDI,EDI
MOV dword ptr [ESP + 0x10],ECX
PUSH ESI
CALL 0x004a2d30
MOV EAX,dword ptr [ESI + 0xc]
ADD ESP,0x4
TEST AL,0x80
JZ 0x004a09e5
AND AL,0xfc
MOV dword ptr [ESI + 0xc],EAX
JMP 0x004a09f9
TEST AL,0x1
JZ 0x004a09f9
TEST AL,0x8
JZ 0x004a09f9
TEST AH,0x4
JNZ 0x004a09f9
MOV dword ptr [ESI + 0x18],0x200
MOV EAX,dword ptr [ESP + 0x10]
MOV ECX,dword ptr [ESI + 0x10]
PUSH EDI
PUSH EAX
PUSH ECX
CALL 0x004a3ff0
ADD ESP,0xc
INC EAX
NEG EAX
SBB EAX,EAX
NEG EAX
DEC EAX
POP EDI
POP ESI
RET
CALL 0x004a3dc0
MOV dword ptr [EAX],0x16
POP EDI
OR EAX,0xffffffff
POP ESI
RET
