; FUN_004870d0
SUB ESP,0x50
PUSH ESI
PUSH EDI
MOV ECX,0x14
XOR EAX,EAX
LEA EDI,[ESP + 0x8]
MOV ESI,dword ptr [ESP + 0x60]
STOSD.REP ES:EDI
MOV EAX,dword ptr [ESP + 0x5c]
MOV dword ptr [ESP + 0x8],0x50
MOV ECX,EAX
SHL ECX,0x6
ADD ECX,EAX
TEST ESI,ESI
LEA EDX,[ECX*0x4 + 0x5117e8]
MOV EAX,dword ptr [ECX*0x4 + 0x5117e8]
MOV dword ptr [ESP + 0x10],EAX
MOV ECX,dword ptr [EDX + 0x4]
MOV dword ptr [ESP + 0x14],ECX
MOV EAX,dword ptr [EDX + 0x8]
MOV dword ptr [ESP + 0x18],EAX
MOV ECX,dword ptr [EDX + 0xc]
MOV dword ptr [ESP + 0x1c],ECX
JZ 0x00487135
PUSH ESI
CALL 0x004a1150
ADD ESP,0x4
TEST EAX,EAX
JZ 0x00487135
MOV dword ptr [ESP + 0x3c],ESI
MOV EAX,[0x00510254]
LEA ECX,[ESP + 0x8]
PUSH 0x1
PUSH ECX
MOV EDX,dword ptr [EAX]
PUSH EAX
CALL dword ptr [EDX + 0x60]
MOV ESI,EAX
TEST ESI,ESI
JGE 0x00487160
MOV EAX,[0x00510254]
PUSH EAX
MOV EDX,dword ptr [EAX]
CALL dword ptr [EDX + 0x10]
MOV EAX,ESI
POP EDI
POP ESI
ADD ESP,0x50
RET
POP EDI
MOV dword ptr [0x00510258],0x0
MOV dword ptr [0x0051386c],0x1
XOR EAX,EAX
POP ESI
ADD ESP,0x50
RET
