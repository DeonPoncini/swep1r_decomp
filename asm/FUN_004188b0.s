; FUN_004188b0
SUB ESP,0x20
PUSH EBX
MOV EBX,dword ptr [ESP + 0x28]
PUSH EBP
PUSH ESI
PUSH EDI
MOV EDI,dword ptr [EBX + 0x10]
MOV dword ptr [ESP + 0x2c],EDI
MOV AX,word ptr [EDI]
CMP AX,0x20
JG 0x004188d2
MOV ESI,0x20
JMP 0x004188f4
CMP AX,0x40
JG 0x004188df
MOV ESI,0x40
JMP 0x004188f4
XOR ECX,ECX
CMP AX,0x80
SETG CL
DEC ECX
AND ECX,0xffffff80
ADD ECX,0x100
MOV ESI,ECX
MOV DI,word ptr [EDI + 0x2]
CMP DI,0x20
JG 0x00418909
MOV EBP,0x20
MOV dword ptr [ESP + 0x34],EBP
JMP 0x00418935
CMP DI,0x40
JG 0x00418919
MOV dword ptr [ESP + 0x34],0x40
JMP 0x00418931
XOR EDX,EDX
CMP DI,0x80
SETG DL
DEC EDX
AND EDX,0xffffff80
ADD EDX,0x100
MOV dword ptr [ESP + 0x34],EDX
MOV EBP,dword ptr [ESP + 0x34]
MOVSX EAX,AX
XOR EDX,EDX
MOV word ptr [EBX + 0xe],BP
LEA EAX,[ESI + EAX*0x1 + -0x1]
DIV ESI
MOVSX EDX,DI
MOV ECX,EAX
LEA EAX,[EBP + EDX*0x1 + -0x1]
XOR EDX,EDX
MOV dword ptr [ESP + 0x18],ECX
DIV EBP
MOV EDI,EAX
IMUL EAX,ECX
MOV word ptr [EBX + 0xc],AX
MOVSX EAX,AX
SHL EAX,0x3
PUSH EAX
CALL 0x0049f270
MOV ECX,dword ptr [ESP + 0x30]
MOV dword ptr [EBX + 0x10],EAX
ADD ESP,0x4
MOV dword ptr [ESP + 0x10],EAX
MOV EDX,dword ptr [ECX + 0x4]
TEST EDI,EDI
MOV dword ptr [ESP + 0x28],EDX
JBE 0x00418a29
MOV EAX,EBP
MOV dword ptr [ESP + 0x24],EDI
IMUL EAX,EDI
MOV dword ptr [ESP + 0x20],EAX
MOVSX ECX,word ptr [EBX]
MOV EDX,dword ptr [ESP + 0x18]
MOV dword ptr [ESP + 0x14],ECX
TEST EDX,EDX
JBE 0x00418a10
MOV EDI,EAX
MOV EAX,EDX
SUB EDI,EBP
XOR EBP,EBP
MOV dword ptr [ESP + 0x1c],EAX
JMP 0x004189b5
MOV ECX,dword ptr [ESP + 0x14]
CMP ESI,ECX
JNC 0x004189bb
MOV ECX,ESI
MOVSX EAX,word ptr [EBX + 0x2]
MOV EDX,dword ptr [ESP + 0x34]
SUB EAX,EDI
CMP EDX,EAX
JNC 0x004189cb
MOV EAX,EDX
MOVSX EDX,word ptr [EBX]
PUSH EDX
MOV EDX,dword ptr [ESP + 0x3c]
PUSH EDX
PUSH EAX
MOV EAX,dword ptr [ESP + 0x34]
PUSH ECX
MOV ECX,dword ptr [ESP + 0x20]
PUSH EDI
PUSH EBP
PUSH EAX
PUSH ECX
CALL 0x00418a80
MOV EAX,dword ptr [ESP + 0x30]
MOV EDX,dword ptr [ESP + 0x34]
ADD EAX,0x8
ADD ESP,0x20
MOV dword ptr [ESP + 0x10],EAX
MOV EAX,dword ptr [ESP + 0x1c]
SUB EDX,ESI
ADD EBP,ESI
DEC EAX
MOV dword ptr [ESP + 0x14],EDX
MOV dword ptr [ESP + 0x1c],EAX
JNZ 0x004189b1
MOV EBP,dword ptr [ESP + 0x34]
MOV EAX,dword ptr [ESP + 0x20]
MOV ECX,dword ptr [ESP + 0x24]
SUB EAX,EBP
DEC ECX
MOV dword ptr [ESP + 0x20],EAX
MOV dword ptr [ESP + 0x24],ECX
JNZ 0x00418994
MOV EDX,dword ptr [ESP + 0x28]
PUSH EDX
CALL 0x0049f200
MOV EAX,dword ptr [ESP + 0x30]
ADD ESP,0x4
PUSH EAX
CALL 0x0049f200
XOR ESI,ESI
ADD ESP,0x4
CMP word ptr [EBX + 0xc],SI
JBE 0x00418a76
MOV ECX,dword ptr [EBX + 0x10]
MOV EDI,dword ptr [ECX + ESI*0x8 + 0x4]
LEA EAX,[ECX + ESI*0x8]
PUSH EAX
PUSH EBX
CALL 0x00446b60
ADD ESP,0x8
CALL 0x00408f90
PUSH EDI
CALL 0x0049f200
MOVSX EDX,word ptr [EBX + 0xc]
ADD ESP,0x4
INC ESI
CMP ESI,EDX
JC 0x00418a4b
POP EDI
POP ESI
MOV EAX,EBX
POP EBP
POP EBX
ADD ESP,0x20
RET
