; FUN_004040a0
MOV EAX,[0x004b2910]
PUSH EBX
PUSH EBP
PUSH ESI
TEST EAX,EAX
PUSH EDI
JZ 0x0040417d
MOV ESI,dword ptr [ESP + 0x14]
TEST ESI,ESI
JZ 0x0040417d
MOV EAX,dword ptr [ESI + 0x4]
TEST EAX,EAX
JZ 0x004040d2
MOV EAX,dword ptr [ESP + 0x1c]
PUSH EAX
PUSH ESI
CALL 0x00404190
ADD ESP,0x8
MOV ECX,dword ptr [ESP + 0x18]
MOV EDX,dword ptr [ESP + 0x1c]
PUSH ESI
PUSH ECX
PUSH EDX
CALL dword ptr [0x004ac05c]
TEST EAX,EAX
MOV dword ptr [ESI + 0x4],EAX
JZ 0x0040417d
MOV EAX,dword ptr [ESI]
XOR EBP,EBP
TEST EAX,EAX
JLE 0x0040415d
LEA EBX,[ESI + 0x8]
PUSH ESI
CALL 0x004046e0
MOV EAX,dword ptr [ESI + 0x4]
ADD ESP,0x4
MOV EAX,dword ptr [EAX + EBP*0x4]
PUSH 0x1ff
PUSH EBX
PUSH EAX
MOV ECX,dword ptr [EAX]
CALL dword ptr [ECX + 0x14]
CMP EAX,0x80040202
JNZ 0x00404152
MOV EDI,dword ptr [ESI + 0x34]
PUSH ESI
CALL 0x004046e0
MOV EDX,dword ptr [0x00ecc420]
ADD ESP,0x4
PUSH EDI
CALL dword ptr [EDX + 0x20]
MOV dword ptr [ESI + 0x150],EAX
MOV dword ptr [ESI + 0x38],EAX
MOV EAX,dword ptr [ESI + 0x4]
ADD ESP,0x4
MOV dword ptr [ESI + 0x34],EDI
MOV EAX,dword ptr [EAX + EBP*0x4]
PUSH 0x1ff
PUSH EBX
PUSH EAX
MOV ECX,dword ptr [EAX]
CALL dword ptr [ECX + 0x14]
TEST EAX,EAX
JNZ 0x00404167
MOV EAX,dword ptr [ESI]
INC EBP
CMP EBP,EAX
JL 0x004040f9
MOV EAX,0x1
POP EDI
POP ESI
POP EBP
POP EBX
RET
MOV EDX,dword ptr [ESI + 0x4]
MOV EAX,dword ptr [ESP + 0x1c]
PUSH EDX
PUSH EAX
CALL dword ptr [0x004ac058]
MOV dword ptr [ESI + 0x4],0x0
POP EDI
POP ESI
POP EBP
XOR EAX,EAX
POP EBX
RET
