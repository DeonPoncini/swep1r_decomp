; FUN_00412fb0
PUSH ESI
MOV ESI,dword ptr [ESP + 0x8]
PUSH EDI
MOV EDI,dword ptr [ESP + 0x10]
CMP EDI,-0x1
JNZ 0x00412fe9
MOV EDX,dword ptr [ESI + 0x5c]
CMP EDX,0x14
JNC 0x00413086
XOR EAX,EAX
LEA ECX,[ESI + 0x60]
TEST dword ptr [ECX],0x10000
JZ 0x00412fe3
INC EAX
ADD ECX,0x38
CMP EAX,0x14
JL 0x00412fd0
JMP 0x00412fe9
INC EDX
MOV EDI,EAX
MOV dword ptr [ESI + 0x5c],EDX
CMP EDI,-0x1
JZ 0x00413086
MOV EAX,EDI
MOV ECX,dword ptr [ESP + 0x14]
SHL EAX,0x3
SUB EAX,EDI
PUSH 0xff
PUSH 0xff
PUSH 0xff
LEA EAX,[ESI + EAX*0x8]
PUSH 0xff
PUSH EDI
PUSH ESI
MOV dword ptr [EAX + 0x64],ECX
LEA ECX,[EDI + 0x2]
MOV EDX,ECX
MOV dword ptr [EAX + 0x6c],0x3f800000
SHL EDX,0x3
SUB EDX,ECX
MOV ECX,dword ptr [ESP + 0x38]
OR ECX,0x10000
MOV dword ptr [ESI + EDX*0x8],0x3f800000
MOV dword ptr [EAX + 0x60],ECX
CALL 0x00413090
MOV EDX,dword ptr [ESP + 0x30]
ADD ESP,0x18
PUSH EDX
PUSH EDI
PUSH ESI
CALL 0x004171a0
ADD ESP,0xc
MOV dword ptr [ESI + 0x5c],0x0
LEA EAX,[ESI + 0x60]
MOV ECX,0x14
TEST dword ptr [EAX],0x10000
JZ 0x0041306f
INC dword ptr [ESI + 0x5c]
ADD EAX,0x38
DEC ECX
JNZ 0x00413064
MOV EAX,dword ptr [ESP + 0x1c]
PUSH EAX
PUSH EDI
PUSH ESI
CALL 0x004130e0
ADD ESP,0xc
MOV EAX,EDI
POP EDI
POP ESI
RET
